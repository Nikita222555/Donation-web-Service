# Donation-web-Service


### Логика системы
    Система имитирует некий сервис сбора пожертвований для N-количества благополучателей.
  Она состоит из двух микросервисов, где первый - это web-сервис, принимающий входящие сообщения (*JSON*) и
обновляющий баланс клиентов,а второй служит для внесения записей в базу данных (вносит совершенные "транзакции"). 
Общение между ними организовано по Kafka.


### Принцип работы сервиса 1 (Producer):
- Получение *JSON*-запроса от внешнего источника по URL (http://localhost:8080/api/v1/open) с именем и суммой;
- Отправка сообщения в "topic-1" (Kafka) для взаимодействующего микросервиса;
- Обработка полученного *JSON*-сообщения;
- Обновление баланса клиента (получение пожертвования);
- Проверка работы сервиса №2 (Consumer) - внесения данных в БД  (*donation*);
- Формирование и отправка ответа о статусе операции (http://localhost:8080/api/v1/open);


### Принцип работы сервиса 2 (Consumer):
- Чтение и обработка сообщения из "topic-1" (Kafka);
- Внесение данных об операции в БД (*donation*);

### Подготовка окружения 
##### Запуск ZooKeeper Kafka
     .\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties
     .\bin\windows\kafka-server-start.bat .\config\server.properties
  Перед запуском рекомендуется очистить логи Kafka (.\Kafka\kafka-logs)
