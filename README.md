# Donation-web-Service


### Логика системы
  Система имитирует некий сервис сбора пожертвований для N-количества благополучателей.
  Она состоит из двух микросервисов, где первый - это web-сервис, принимающий входящие сообщения (*JSON*) и
обновляющий баланс клиентов,а второй служит для внесения записей в базу данных (вносит совершенные "транзакции"). 
Общение между ними организовано по Kafka.


### Принцип работы сервиса 1 (Producer):
- Получение *POST*-запроса от внешнего источника по URL (http://localhost:8080/api/v1/open) с именем и суммой;
- Отправка сообщения в "topic-1" (Kafka) для взаимодействующего микросервиса;
- Обработка полученного *JSON*-сообщения;
- Обновление баланса клиента (получение пожертвования);
- Чтение сообщений из "topic-2" (Kafka) со статусом операции взаимодействующего микросервиса;
- Формирование и отправка ответа о статусе операции (http://localhost:8080/api/v1/open);


### Принцип работы сервиса 2 (Consumer):
- Чтение и обработка сообщения из "topic-1" (Kafka);
- Внесение данных об операции в БД (*transaction*);
- Отправка сообщения в "topic-2" (Kafka) для взаимодействующего микросервиса о статусе операции;

### Подготовка окружения 
##### Запуск ZooKeeper и Kafka
 ZooKeeper:
 
      .\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties
     
 Kafka:
 
      .\bin\windows\kafka-server-start.bat .\config\server.properties
  Перед запуском рекомендуется очистить логи Kafka (.\Kafka\kafka-logs)
